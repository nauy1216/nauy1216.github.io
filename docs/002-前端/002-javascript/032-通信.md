
# 同源
协议、域名、端口都相同才是同源。

# 同源策略限制
> 限制从一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的关键的安全机制。
> 不同源的 JS 只能未经允许地发数据，不能未经允许地读数据。

> 跨域只能发送请求，不能读取到返回的数据。
1. cookie、storage、indexDB 的访问
2. dom 的访问
3. ajax 请求


# 为什么 form 提交不会有跨域行为而 ajax 有？
跨域是浏览器行为，而且具体行为是，你的请求可以发送，浏览器也能收到正常的响应，只是返回给你的时候，浏览器检查了是不是跨域，是的话就阻止了。
form 提交(submit 函数)之后，是不会有任何数据返回的。你没机会读任何东西，所以可以认为是无害的，不在同源策略之内。
但 Ajax 是有数据返回的, 所以是浏览器认为是可能有害的。
1. 不管请求是否跨域， 关键是能否获取到服务器返回的信息，如果能获取到那么跨域就是危险的。
2. 跨域请求其实是将请求发送到了服务器，只是返回结果被浏览器拦截了。

# 简单请求跨域和复杂请求跨域
1. 简单跨域会直接将请求发送到服务器
2. 复杂请求会先发送预请求options，只有当预请求发送成功后才会发送实际的请求。

# 前后端如何通信
1. ajax
2. websocket
3. cors（Cross Origin Resource Sharing 跨来源资源共享）

# 跨域通信
分两种情况：
1. 与不同域的前端通信
    - postMessage
    - 对于嵌套的不同域页面可以使用 url 上的 hash 值传递消息

2. 与不同域的服务器通信

1. jsonp
3. cors
4. websocket