# 首屏优化

根据百度用户体验部的研究结果来看,普通用户期望且能够接受的页面加载时间在 3 秒以内。若页面的加载时间过慢,用户就会失去耐心而选择离开。

# script 优化

### 加载优化

```html
// 第一种
<script src="script.js">
// 第二种
<script async src="script.js">
// 第二种
<script defer src="script.js">
```

-   第一种： 同步脚本加载并立即执行。加载和执行都会阻塞对文档的解析。能保证多个脚本的顺序执行。
-   第二种： 异步加载，加载后理解执行。加载不会阻塞， 执行会阻塞。不能保证多个 async 脚本的顺序执行，谁先加载完谁就先执行。
-   第三种： 异步加载，文档解析完成后，才会执行。加载和执行都不会阻塞。能保证多个 defer 脚本的顺序执行。对于不支持 defer 的浏览器直接将脚本的加载放在 body 的后面。

### 运行时优化

-   1、避免频繁引起重排，将合并多次 dom 操作为一次。

# 网络优化

-   http2
-   CDN

# 代码

-   压缩
-   懒加载
-   请求合并， 多个文件合成一个文件

# SSR(服务端渲染)

# 离线缓存

-   直出+离线包缓存
-   客户端代理的 VasSonic
-   PWA+直出+预加载
-   NSR 渲染
-   客户端 PWA
-   小程序化
    -   https://www.w3.org/TR/2019/WD-mini-app-white-paper-20190912/#constructor
